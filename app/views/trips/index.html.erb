<%# <% title "Trips" %>

<%#Display a list of trips%>
<%# <h3>All Trips</h3>
<% @trips.each do |trip| %>
<%#   <%= render "trip", trip: trip %>
<%#   <%# <%= link_to "All Journal Entries", trip_journal_entries_path(trip) %> 
<%# <% end %>

<%# Display a message if there are no trips %>
<%# % if @trips.empty? %>
<%#   <p>No trips available at the moment. Please check back later!</p>
<% end %>

<%# Add a link to create a new trip %>
<%# <div class="new-trip">
  <%= link_to "Create New Trip", new_trip_path, class: "btn btn-primary" %>
<%# </div>

<%# above is the original before ig inspiration %>

<h2 class="text-start">Journal Feed</h2>

<!-- Create New Journal Entry Button -->
<div class="text-left mb-4">
  <% if authenticated? %>
    <div class="d-inline-flex gap-2 flex-wrap justify-content-center">
      <%= link_to "Create Journal Entry",
          new_journal_entry_path(from_trips: true),
          class: "btn btn-primary" %>
      <%= link_to "Create New Trip",
          new_trip_path,
          class: "btn btn-outline-secondary" %>
    </div>
  <% else %>
    <p class="text-muted small mb-0">
      Log in to start sharing your travel stories.
    </p>
    <%= link_to "Login", login_path, class: "btn btn-outline-primary mt-2" %>
  <% end %>
</div>

<!-- Main Feed -->
<% @feed_entries.each do |entry| %>
  <%= render "journal_entries/journal_entry", journal_entry: entry %>
<% end %>


<!-- RIGHT PANEL — Trips List -->
<% content_for :right_panel do %>
  <h3>Explore Trips</h3>

  <% Trip.all.each do |trip| %>
    <div class="card mb-3 p-3">
      <h5><%= link_to trip.title, trip_journal_entries_path(trip) %></h5>
      <p class="small text-muted"><%= trip.destination %></p>
      <p class="text-muted small">
        ✈️ Created by 
        <%= link_to trip.user.name, user_path(trip.user), class: "fw-semibold" %>
      </p>
      <div class="d-flex gap-2">
        <%= link_to "View Journals", trip_journal_entries_path(trip),
            class: "btn btn-primary btn-sm flex-fill" %>
        <% if authenticated? %>
          <%= link_to "Write Entry", new_trip_journal_entry_path(trip),
              class: "btn btn-primary btn-sm flex-fill" %>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>
